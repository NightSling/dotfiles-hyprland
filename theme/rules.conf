# ========================================
# Float Window Rules
# ========================================

# Large centered floating windows (qimgv, mpv, etc.)
windowrule {
  name = large-center-float
  float = on
  match:class = ^(center-float-large)$|^(.*qimgv.*)$|^(.*mpv.*)$
  size = (monitor_w*0.7) (monitor_h*0.7)
  center = 1
}

# Medium centered floating windows
$center-float = ^(center-float)$
$center-float-title = ^(.*Open Folder.*)$|^(.*Open File.*)$|^(.*Save File.*)$|^(.*Save Folder.*)$|^(.*Save Image.*)$|^(.*Save As.*)$|^(.*Open As.*)$

windowrule {
  name = medium-center-float-by-class
  float = on
  match:class = $center-float
  size = (monitor_w*0.5) (monitor_h*0.5)
  center = 1
}

windowrule {
  name = medium-center-float-by-title
  float = on
  match:title = $center-float-title
  size = (monitor_w*0.5) (monitor_h*0.5)
  center = 1
}

# Small centered floating windows (calculator, etc.)
$center-float-mini = ^(center-float-mini)$|^(.*galculator.*)$|^(.*ytdlp-gui.*)$|^(.*udiskie.*)$|^(.*Calculator.*)$

windowrule {
  name = mini-center-float
  float = on
  match:class = $center-float-mini
  size = (monitor_w*0.3) (monitor_h*0.4)
  center = 1
}

# Left bottom mini floating windows
$left-float-mini = ^(left-float)$
$left-float-title = ^(.*Picture-in-Picture.*)$

windowrule {
  name = left-mini-float-by-class
  float = on
  match:class = $left-float-mini
  size = (monitor_w*0.3) (monitor_h*0.3)
}

windowrule {
  name = left-mini-float-by-title
  float = on
  match:title = $left-float-title
  size = (monitor_w*0.3) (monitor_h*0.3)
}

# General floating apps
windowrule {
  name = misc-float-apps
  float = on
  match:class = xfce-polkit|wleave|title:branchdialog|nwg-look|nm-connection-editor|org.twosheds.iwgtk|overskride
}

# JetBrains no initial focus
windowrule {
  name = jetbrains-no-focus
  no_initial_focus = on
  match:class = (jetbrains-)(.*)
  match:title = ^win(.*)
  match:initial_title = win.*
  match:float = 1
}

# ========================================
# Workspace Rules - System
# ========================================

windowrule {
  name = workspace-virtualization
  workspace = 8
  match:class = ^(.*virt-manager.*)$|(.*PikaBackup.*)$|(.*VirtualBox Manager.*)$
}

windowrule {
  name = workspace-system-tools
  workspace = 17
  match:class = ^(.*GParted.*)$|(.*clamtk.*)$|(.*gnome.Logs.*)$
}

# ========================================
# Workspace Rules - Gaming
# ========================================

windowrule {
  name = workspace-game-instances
  workspace = 7
  match:class = ^(.*steam_app.*)$|(.*gamescope.*)$|(.*atlauncher.*)$|(.*Minecraft.*)$
}

windowrule {
  name = workspace-game-launchers
  workspace = 16 silent
  match:class = ^([Ss]team)$|(.*heroic.*)$
}

windowrule {
  name = workspace-emulators
  workspace = 7
  match:class = ^(.*Ryujinx.*)$|(.*cemu.*)$|(.*dolphin.*)$|(.*RetroArch.*)$|(.*xemu.*)$|(.*duckstation.*)$|(.*rpcs3.*)$
}

# ========================================
# Workspace Rules - Media
# ========================================

windowrule {
  name = workspace-video-editing
  workspace = 6
  match:class = ^(.*kdenlive.*)$
}

windowrule {
  name = workspace-email
  workspace = 21 silent
  match:class = ^(.*thunderbird.*)$
}

windowrule {
  name = workspace-btop
  workspace = 22 silent
  match:class = ^(.*btop.*)$
}

windowrule {
  name = workspace-nvtop
  workspace = 22 silent
  match:class = ^(.*nvtop.*)$
}

windowrule {
  name = workspace-music-apps
  workspace = 19 silent
  match:class = ^(.*[Ss]potify.*)$|(.*tidal-hifi.*)$|(.*You[Tt]ube Music.*)$
}

windowrule {
  name = workspace-discord
  workspace = 8 silent
  match:class = ^(.*discord.*)$|(.*vesktop.*)$|(.*WebCord.*)$
}

windowrule {
  name = workspace-audio-tools
  workspace = 14
  match:class = ^(.*easyeffects.*)$|^(.*qpwgraph.*)$|(.*Helvum.*)$
}

windowrule {
  name = workspace-music-production
  workspace = 5
  match:class = ^(.*vital.*)$|(.*fl64.*)$|(.*nicotine_plus.*)$
}

windowrule {
  name = workspace-fl-studio
  workspace = 5
  match:title = ^(.*FL Studio.*)$
}

windowrule {
  name = workspace-creative-apps
  workspace = 4
  match:class = ^(.*pinta.*)$|(.*krita.*)$|(.*blender.*)$|(.*Upscayl.*)$
}

# ========================================
# Workspace Rules - Productivity/Dev
# ========================================

windowrule {
  name = workspace-notes-research
  workspace = 9 silent
  match:class = ^(.*obsidian.*)$|(.*Zotero.*)$
}

windowrule {
  name = workspace-code-editors
  workspace = 2
  match:class = ^(.*Code.*)$|(.*codium.*)$|(.*VSCodium.*)$|(.*neovide.*)$
}

# ========================================
# Animation Rules
# ========================================

windowrule {
  name = animation-cava-slide
  animation = slide
  match:title = ^(.*cava.*)$
}

windowrule {
  name = animation-wleave-popin
  animation = popin
  match:class = ^(.*wleave.*)$
}

# ========================================
# Scratchpad Rules
# ========================================

# Extra large scratchpad
$scratchpad-extralarge = ^(scratchpad-extralarge)$

windowrule {
  name = scratchpad-extralarge-float
  float = on
  match:class = $scratchpad-extralarge
  center = 1
  size = (monitor_w*0.8) (monitor_h*0.8)
  animation = slide
}

windowrule {
  name = scratchpad-extralarge-workspace
  match:workspace = scratchpad-large silent
  match:class = $scratchpad-extralarge
}

# Large scratchpad
$scratchpad-large = ^(scratchpad-large)$

windowrule {
  name = scratchpad-large-float
  float = on
  match:class = $scratchpad-large
  center = 1
  size = (monitor_w*0.7) (monitor_h*0.7)
  animation = slide
}

windowrule {
  name = scratchpad-large-workspace
  match:workspace = scratchpad-large silent
  match:class = $scratchpad-large
}

# Medium scratchpad
$scratchpad = ^(scratchpad)$

windowrule {
  name = scratchpad-medium-float
  float = on
  match:class = $scratchpad
  center = 1
  size = (monitor_w*0.5) (monitor_h*0.5)
  animation = slide
}

windowrule {
  name = scratchpad-medium-workspace
  match:workspace = scratchpad silent
  match:class = $scratchpad
}

# Mini scratchpad
$scratchpad-mini = ^(scratchpad-mini)$

windowrule {
  name = scratchpad-mini-float
  float = on
  match:class = $scratchpad-mini
  center = 1
  size = (monitor_w*0.3) (monitor_h*0.4)
  animation = slide
}

windowrule {
  name = scratchpad-mini-workspace
  match:workspace = scratchpad-mini silent
  match:class = $scratchpad-mini
}

# Side scratchpad (pavucontrol, blueman, etc.)
$sideScratchpad = ^(.*pavucontrol.*)$|(.*blueman-manager.*)$

windowrule {
  name = side-scratchpad-workspace
  match:workspace = scratchpad silent
  match:class = $sideScratchpad
}

windowrule {
  name = side-scratchpad-float
  size = (monitor_w*0.3) (monitor_h*0.9)
  match:class = $sideScratchpad
  float = on
  center = 1
}

# ========================================
# Specific App Rules
# ========================================

# XWayland Video Bridge
$videobridge = ^(.*xwaylandvideobridge.*)$

windowrule {
  name = xwaylandvideobridge-invisible
  opacity = 0.0 override 0.0 override
  match:class = $videobridge
  no_anim = on
  no_blur = on
  no_initial_focus = on
  max_size = 1 1
}

# Zathura PDF viewer
$zathura = ^(.*zathura.*)$

windowrule {
  name = zathura-float
  float = on
  match:class = $zathura
  size = (monitor_w*0.35) (monitor_h*0.9)
  center = 1
}

# Scrcpy (Android screen mirror)
$scrcpy = ^(.*scrcpy.*)$

windowrule {
  name = scrcpy-float
  center = 1
  match:class = $scrcpy
  float = on
}

# Music apps - no initial focus
windowrule {
  name = music-apps-no-focus
  no_initial_focus = on
  match:class = (.*[Ss]potify.*)|(.*tidal-hifi.*)$|(.*You[Tt]ube Music.*)
}

# ========================================
# Idle Inhibit Rules
# ========================================

windowrule {
  name = idle-inhibit-steam-games
  idle_inhibit = always
  match:class = ^(.*steam_app.*)$
  immediate = on
}

windowrule {
  name = idle-inhibit-video-players
  idle_inhibit = fullscreen
  match:class = ^(.*celluloid.*)$|^(.*mpv.*)$
}

windowrule {
  name = idle-inhibit-spotify
  idle_inhibit = fullscreen
  match:class = ^(.*[Ss]potify.*)$
}

windowrule {
  name = idle-inhibit-browsers
  idle_inhibit = fullscreen
  match:class = ^(.*LibreWolf.*)$|^(.*floorp.*)$|^(.*Brave.*)$|^(.*firefox.*)$|^(.*chromium.*)$|^(.*zen-alpha.*)$
}

# ========================================
# Screenshot Tools
# ========================================

windowrule {
  name = flameshot-config
  no_anim = on
  match:class = ^(flameshot)$
  float = on
  move = 0 0
  pin = of
}

# ========================================
# Gromit-MPX (Screen annotation)
# ========================================

workspace = special:gromit, gapsin:0, gapsout:0, on-created-empty: gromit-mpx -a

windowrule {
  name = gromit-mpx-overlay
  no_blur = on
  match:class = ^(Gromit-mpx)$
  opacity = 1 override 1 override
  no_shadow = on
  size = (monitor_w*1) (monitor_h*1)
}

# ========================================
# Layer Rules
# ========================================

layerrule {
  name = rofi-animation-blur
  animation = popin
  match:namespace = rofi
  blur = on
  ignore_alpha = 0
}

layerrule {
  name = waybar-blur
  blur = on
  match:namespace = waybar
  ignore_alpha = 0
}

layerrule {
  name = swaync-notification-animation
  ignore_alpha = 0
  match:namespace = swaync-notification-window
  animation = slide
}

layerrule {
  name = swaync-control-center-animation
  animation = slide
  match:namespace = swaync-control-center
}

layerrule {
  name = swayosd-fade
  animation = fade
  match:namespace = swayosd
}

layerrule {
  name = selection-fade
  animation = fade
  match:namespace = selection
}

layerrule {
  name = hyprlock-fade
  animation = fade
  match:namespace = hyprlock
}

layerrule {
  name = hyprpicker-no-animation
  no_anim = on
  match:namespace = hyprpicker
}

layerrule {
  name = vicinae-blur
  blur = on
  match:namespace = vicinae
  ignore_alpha = 0
  no_anim = on
}
